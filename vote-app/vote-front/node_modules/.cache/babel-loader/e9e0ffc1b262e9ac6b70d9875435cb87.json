{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport { useCallback, useState, useMemo } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nexport function useInput() {\n  _s();\n\n  let init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var [value, setValue] = useState(init);\n  var onChange = useCallback(function onChange(e) {\n    setValue(e.target.value);\n  }, []);\n  return {\n    value,\n    onChange\n  };\n}\n\n_s(useInput, \"56g7Bv7DNfzNKa9KMDwmfNNV4nI=\");\n\nexport function useBooleanInput() {\n  _s2();\n\n  let init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  var [checked, setChecked] = useState(init);\n  var onChange = useCallback(function onChange(e) {\n    setChecked(e.target.checked);\n  }, []);\n  return {\n    checked,\n    onChange\n  };\n}\n\n_s2(useBooleanInput, \"9Mamt7qSi5d8XrsRtTO/BdG9hSc=\");\n\nexport function useQuery() {\n  _s3();\n\n  var search = useLocation().search;\n  return useMemo(() => new URLSearchParams(search), [search]);\n} //从url中获取?后面的部分\n\n_s3(useQuery, \"z3d/mcTWC4E3z8BNMd0PwL5/N3w=\", false, function () {\n  return [useLocation];\n});\n\nexport function useAxios(config) {\n  _s4();\n\n  var [data, setData] = useState(); //用于存放请求结果的\n\n  var [erro, setError] = useState(); //用于存放错误结果\n\n  var [loading, setLoading] = useState(); //是否还在加载中\n\n  useEffect(() => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n    var req = axios.get('/vote/' + voteId, {\n      cancelToken: source.token\n    });\n    req.then(res => {\n      if (res.data.code == 0) {\n        var data = res.data;\n        setData(data);\n        setLodading(false);\n      } else {\n        setError(res.data.msg);\n        setLoading(false);\n      }\n    });\n    return () => source.cancel();\n  }, [config.url]);\n  return {\n    data,\n    loading\n  };\n}\n\n_s4(useAxios, \"Er0wipqrgZK8UHW9QTbUC6v3WyQ=\");","map":{"version":3,"sources":["/Users/zhengwen/Desktop/vote/vote-front/src/hooks.js"],"names":["useCallback","useState","useMemo","useLocation","axios","useInput","init","value","setValue","onChange","e","target","useBooleanInput","checked","setChecked","useQuery","search","URLSearchParams","useAxios","config","data","setData","erro","setError","loading","setLoading","useEffect","CancelToken","source","req","get","voteId","cancelToken","token","then","res","code","setLodading","msg","cancel","url"],"mappings":";;;;;AAAA,SAASA,WAAT,EAAqBC,QAArB,EAA+BC,OAA/B,QAA6C,OAA7C;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,SAASC,QAAT,GAA0B;AAAA;;AAAA,MAARC,IAAQ,uEAAH,EAAG;AAC/B,MAAI,CAACC,KAAD,EAAOC,QAAP,IAAmBP,QAAQ,CAACK,IAAD,CAA/B;AACA,MAAIG,QAAQ,GAAGT,WAAW,CAAC,SAASS,QAAT,CAAkBC,CAAlB,EAAoB;AAC3CF,IAAAA,QAAQ,CAACE,CAAC,CAACC,MAAF,CAASJ,KAAV,CAAR;AACH,GAFyB,EAExB,EAFwB,CAA1B;AAGA,SAAM;AACJA,IAAAA,KADI;AACEE,IAAAA;AADF,GAAN;AAGD;;GAReJ,Q;;AAUhB,OAAO,SAASO,eAAT,GAAsC;AAAA;;AAAA,MAAbN,IAAa,uEAAN,KAAM;AAC3C,MAAI,CAACO,OAAD,EAASC,UAAT,IAAuBb,QAAQ,CAACK,IAAD,CAAnC;AACA,MAAIG,QAAQ,GAAGT,WAAW,CAAC,SAASS,QAAT,CAAkBC,CAAlB,EAAoB;AAC7CI,IAAAA,UAAU,CAACJ,CAAC,CAACC,MAAF,CAASE,OAAV,CAAV;AACD,GAFyB,EAExB,EAFwB,CAA1B;AAGA,SAAO;AACLA,IAAAA,OADK;AACGJ,IAAAA;AADH,GAAP;AAGD;;IAReG,e;;AAUhB,OAAO,SAASG,QAAT,GAAmB;AAAA;;AACxB,MAAIC,MAAM,GAAGb,WAAW,GAAGa,MAA3B;AACA,SAAOd,OAAO,CAAC,MAAI,IAAIe,eAAJ,CAAoBD,MAApB,CAAL,EAAiC,CAACA,MAAD,CAAjC,CAAd;AACD,C,CACD;;IAJgBD,Q;UACDZ,W;;;AAMf,OAAO,SAASe,QAAT,CAAkBC,MAAlB,EAAyB;AAAA;;AAC9B,MAAI,CAACC,IAAD,EAAMC,OAAN,IAAiBpB,QAAQ,EAA7B,CAD8B,CACC;;AAC/B,MAAI,CAACqB,IAAD,EAAMC,QAAN,IAAkBtB,QAAQ,EAA9B,CAF8B,CAEE;;AAChC,MAAI,CAACuB,OAAD,EAASC,UAAT,IAAuBxB,QAAQ,EAAnC,CAH8B,CAGQ;;AACtCyB,EAAAA,SAAS,CAAC,MAAI;AACZ,UAAMC,WAAW,GAAGvB,KAAK,CAACuB,WAA1B;AACA,UAAMC,MAAM,GAAGD,WAAW,CAACC,MAAZ,EAAf;AACA,QAAIC,GAAG,GAAGzB,KAAK,CAAC0B,GAAN,CAAU,WAAWC,MAArB,EAA4B;AACpCC,MAAAA,WAAW,EAACJ,MAAM,CAACK;AADiB,KAA5B,CAAV;AAGAJ,IAAAA,GAAG,CAACK,IAAJ,CAASC,GAAG,IAAE;AACZ,UAAGA,GAAG,CAACf,IAAJ,CAASgB,IAAT,IAAiB,CAApB,EAAsB;AACpB,YAAIhB,IAAI,GAAGe,GAAG,CAACf,IAAf;AACAC,QAAAA,OAAO,CAACD,IAAD,CAAP;AACAiB,QAAAA,WAAW,CAAC,KAAD,CAAX;AACD,OAJD,MAIK;AACHd,QAAAA,QAAQ,CAACY,GAAG,CAACf,IAAJ,CAASkB,GAAV,CAAR;AACAb,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,KATD;AAUA,WAAO,MAAIG,MAAM,CAACW,MAAP,EAAX;AACF,GAjBS,EAiBR,CAACpB,MAAM,CAACqB,GAAR,CAjBQ,CAAT;AAkBD,SAAO;AACLpB,IAAAA,IADK;AAELI,IAAAA;AAFK,GAAP;AAIA;;IA1BeN,Q","sourcesContent":["import { useCallback,useState ,useMemo} from \"react\"\nimport { useLocation } from \"react-router-dom\"\nimport axios from \"axios\"\n\nexport function useInput(init=''){\n  var [value,setValue] = useState(init)\n  var onChange = useCallback(function onChange(e){\n      setValue(e.target.value)\n  },[])\n  return{\n    value,onChange\n  }\n}\n\nexport function useBooleanInput(init = false){\n  var [checked,setChecked] = useState(init)\n  var onChange = useCallback(function onChange(e){\n    setChecked(e.target.checked)\n  },[])\n  return {\n    checked,onChange\n  }\n}\n\nexport function useQuery(){\n  var search = useLocation().search\n  return useMemo(()=>new URLSearchParams(search),[search])\n}\n//从url中获取?后面的部分\n\n\nexport function useAxios(config){\n  var [data,setData] = useState()//用于存放请求结果的\n  var [erro,setError] = useState()//用于存放错误结果\n  var [loading,setLoading] = useState() //是否还在加载中\n  useEffect(()=>{\n    const CancelToken = axios.CancelToken\n    const source = CancelToken.source()\n    var req = axios.get('/vote/' + voteId,{\n      cancelToken:source.token\n    })\n    req.then(res=>{\n      if(res.data.code == 0){\n        var data = res.data\n        setData(data)\n        setLodading(false)\n      }else{\n        setError(res.data.msg)\n        setLoading(false)\n      }\n    })\n    return ()=>source.cancel()\n },[config.url])\n return {\n   data,\n   loading\n }\n}"]},"metadata":{},"sourceType":"module"}
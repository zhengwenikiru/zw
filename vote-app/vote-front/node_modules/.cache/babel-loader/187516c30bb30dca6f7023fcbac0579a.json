{"ast":null,"code":"import _objectSpread from\"/Users/zhengwen/Desktop/zw/vote-app/vote-front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/zhengwen/Desktop/zw/vote-app/vote-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/zhengwen/Desktop/zw/vote-app/vote-front/node_modules/@babel/runtime/regenerator/index.js\";import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{useInput,useUser}from\"./hooks\";import{useEffect}from'react';import'./login.css';import{Button,Input}from'antd';import'antd/dist/antd.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var name=useInput();var password=useInput();var navigate=useNavigate();var userInfo=useUser();useEffect(function(){if(userInfo.data){navigate('/main');}});//登陆成功了的话，不必进入该页面。回退\nfunction login(){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var info,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:info={name:name.value,password:password.value};_context.prev=1;_context.next=4;return axios.post('/account/login',info);case 4:res=_context.sent;//axios返回的是相应对象\nuserInfo.update();navigate(-1);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);data=res.data;//请求成功，但是响应码大于等于400在axios里也算失败，网络原因直接请求失败，也会抛错\nalert(data.msg);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return _login.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box1\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Input,_objectSpread({placeholder:\"\\u7528\\u6237\\u540D\",type:\"text\"},name))}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Input,_objectSpread({placeholder:\"\\u5BC6\\u7801\",type:\"password\"},password))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"box2\",children:[/*#__PURE__*/_jsx(Button,{type:\"primiry\",shape:\"round\",onClick:login,children:\"\\u767B\\u9646\"}),\" \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"\\u6CE8\\u518C\"})]})]});}","map":{"version":3,"sources":["/Users/zhengwen/Desktop/zw/vote-app/vote-front/src/Login.js"],"names":["Link","useNavigate","axios","useInput","useUser","useEffect","Button","Input","Login","name","password","navigate","userInfo","data","login","info","value","post","res","update","alert","msg"],"mappings":"8YAAA,OAAOA,IAAP,CAAaC,WAAb,KAA8B,kBAA9B,CACA,MAAOC,CAAAA,KAAP,KAAiB,OAAjB,CACA,OAASC,QAAT,CAAmBC,OAAnB,KAAkC,SAAlC,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,MAAO,aAAP,CACA,OAAQC,MAAR,CAAeC,KAAf,KAA2B,MAA3B,CACA,MAAO,oBAAP,C,wFAIA,cAAe,SAASC,CAAAA,KAAT,EAAgB,CAC/B,GAAIC,CAAAA,IAAI,CAAGN,QAAQ,EAAnB,CACA,GAAIO,CAAAA,QAAQ,CAAGP,QAAQ,EAAvB,CACA,GAAIQ,CAAAA,QAAQ,CAAGV,WAAW,EAA1B,CACA,GAAIW,CAAAA,QAAQ,CAAGR,OAAO,EAAtB,CAEAC,SAAS,CAAC,UAAI,CACZ,GAAGO,QAAQ,CAACC,IAAZ,CAAiB,CACfF,QAAQ,CAAC,OAAD,CAAR,CACD,CACF,CAJQ,CAAT,CAIE;AAV6B,QAYhBG,CAAAA,KAZgB,yHAY/B,qJACIC,IADJ,CACW,CACTN,IAAI,CAACA,IAAI,CAACO,KADD,CAETN,QAAQ,CAACA,QAAQ,CAACM,KAFT,CADX,uCAOmBd,CAAAA,KAAK,CAACe,IAAN,CAAW,gBAAX,CAA4BF,IAA5B,CAPnB,QAOQG,GAPR,eAOoD;AAChDN,QAAQ,CAACO,MAAT,GACAR,QAAQ,CAAC,CAAC,CAAF,CAAR,CATJ,+EAWME,IAXN,CAWaK,GAAG,CAACL,IAXjB,CAYA;AACAO,KAAK,CAACP,IAAI,CAACQ,GAAN,CAAL,CAbA,oEAZ+B,wCA8B7B,mBACE,aAAK,SAAS,CAAC,WAAf,wBAEE,aAAK,SAAS,CAAC,MAAf,wBACA,kCAAK,KAAC,KAAD,gBAAO,WAAW,CAAC,oBAAnB,CAAyB,IAAI,CAAC,MAA9B,EAAyCZ,IAAzC,EAAL,EADA,cAEA,kCAAK,KAAC,KAAD,gBAAO,WAAW,CAAC,cAAnB,CAAwB,IAAI,CAAC,UAA7B,EAA4CC,QAA5C,EAAL,EAFA,GAFF,cAMA,aAAK,SAAS,CAAC,MAAf,wBAAsB,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,KAAK,CAAC,OAA7B,CAAqC,OAAO,CAAEI,KAA9C,0BAAtB,kBAAuF,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,0BAAvF,GANA,GADF,CAUD","sourcesContent":["import{Link, useNavigate}from 'react-router-dom'\nimport axios from'axios'\nimport { useInput, useUser } from \"./hooks\"\nimport { useEffect } from 'react'\nimport './login.css'\nimport {Button,Input} from 'antd'\nimport 'antd/dist/antd.css';\n\n\n\nexport default function Login(){\nvar name = useInput()\nvar password = useInput()\nvar navigate = useNavigate()\nvar userInfo = useUser()\n\nuseEffect(()=>{\n  if(userInfo.data){\n    navigate('/main')\n  }\n})//登陆成功了的话，不必进入该页面。回退\n\nasync function login(){\nvar info = {\n  name:name.value,\n  password:password.value \n}\ntry{\n  //使用axios发请求\n    var res= await axios.post('/account/login',info)//axios返回的是相应对象\n    userInfo.update()\n    navigate(-1)\n}catch(e){\n  let data = res.data\n//请求成功，但是响应码大于等于400在axios里也算失败，网络原因直接请求失败，也会抛错\nalert(data.msg)\n}\n}\n\n\n  return(\n    <div className='login-box'>\n\n      <div className='box1'>\n      <div><Input placeholder='用户名' type=\"text\" {...name}/></div>\n      <div><Input placeholder='密码' type=\"password\" {...password}/></div>\n      </div>\n    <div className='box2'><Button type='primiry' shape='round' onClick={login}>登陆</Button> <Link to='/register'>注册</Link></div>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}
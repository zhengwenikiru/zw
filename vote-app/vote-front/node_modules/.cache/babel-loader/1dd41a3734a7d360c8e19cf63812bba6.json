{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport { useCallback, useState, useMemo, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nexport function useInput() {\n  _s();\n\n  let init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var [value, setValue] = useState(init);\n  var onChange = useCallback(function onChange(e) {\n    setValue(e.target.value);\n  }, []);\n  return {\n    value,\n    onChange\n  };\n}\n\n_s(useInput, \"56g7Bv7DNfzNKa9KMDwmfNNV4nI=\");\n\nexport function useBooleanInput() {\n  _s2();\n\n  let init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  var [checked, setChecked] = useState(init);\n  var onChange = useCallback(function onChange(e) {\n    setChecked(e.target.checked);\n  }, []);\n  return {\n    checked,\n    onChange\n  };\n}\n\n_s2(useBooleanInput, \"9Mamt7qSi5d8XrsRtTO/BdG9hSc=\");\n\nexport function useQuery() {\n  _s3();\n\n  var search = useLocation().search;\n  return useMemo(() => new URLSearchParams(search), [search]);\n} //从url中获取?后面的部分\n\n_s3(useQuery, \"z3d/mcTWC4E3z8BNMd0PwL5/N3w=\", false, function () {\n  return [useLocation];\n});\n\nexport function useAxios(config) {\n  _s4();\n\n  var [data, setData] = useState(); //用于存放请求结果的\n\n  var [error, setError] = useState(); //用于存放错误结果\n\n  var [loading, setLoading] = useState(); //是否还在加载中\n\n  useEffect(() => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n    var req = axios({ ...config,\n      cancelToken: source.token\n    });\n    req.then(res => {\n      if (res.data.code == 0) {\n        setData(res.data.result);\n      } else {\n        setError(res.data.msg);\n      }\n\n      setLoading(false);\n    }).catch(e => {\n      setError(e.toString());\n      setLoading(false);\n    });\n    return () => source.cancel();\n  }, [config.url]);\n  return {\n    data,\n    loading,\n    error\n  };\n}\n\n_s4(useAxios, \"czLHyNh40tr+ljai53GQsPrSKkI=\");","map":{"version":3,"sources":["/Users/zhengwen/Desktop/vote/vote-front/src/hooks.js"],"names":["useCallback","useState","useMemo","useEffect","useLocation","axios","useInput","init","value","setValue","onChange","e","target","useBooleanInput","checked","setChecked","useQuery","search","URLSearchParams","useAxios","config","data","setData","error","setError","loading","setLoading","CancelToken","source","req","cancelToken","token","then","res","code","result","msg","catch","toString","cancel","url"],"mappings":"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","sourcesContent":["import { useCallback,useState ,useMemo,useEffect} from \"react\"\nimport { useLocation } from \"react-router-dom\"\nimport axios from \"axios\"\n\nexport function useInput(init=''){\n  var [value,setValue] = useState(init)\n  var onChange = useCallback(function onChange(e){\n      setValue(e.target.value)\n  },[])\n  return{\n    value,onChange\n  }\n}\n\nexport function useBooleanInput(init = false){\n  var [checked,setChecked] = useState(init)\n  var onChange = useCallback(function onChange(e){\n    setChecked(e.target.checked)\n  },[])\n  return {\n    checked,onChange\n  }\n}\n\nexport function useQuery(){\n  var search = useLocation().search\n  return useMemo(()=>new URLSearchParams(search),[search])\n}\n//从url中获取?后面的部分\n\n\nexport function useAxios(config){\n  var [data,setData] = useState()//用于存放请求结果的\n  var [error,setError] = useState()//用于存放错误结果\n  var [loading,setLoading] = useState() //是否还在加载中\n  useEffect(()=>{\n    const CancelToken = axios.CancelToken\n    const source = CancelToken.source()\n    var req = axios({\n      ...config,\n      cancelToken:source.token\n    })\n\n    req.then(res => {\n      if(res.data.code == 0){\n        setData(res.data.result)\n      }else{\n        setError(res.data.msg)\n      }\n      setLoading(false)\n    }).catch(e=>{\n      setError(e.toString())\n      setLoading(false)\n    })\n\n\n    return ()=>source.cancel()\n },[config.url])\n return {\n   data,\n   loading,\n   error\n }\n}"]},"metadata":{},"sourceType":"module"}
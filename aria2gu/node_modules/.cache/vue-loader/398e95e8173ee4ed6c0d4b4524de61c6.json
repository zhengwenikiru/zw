{"remainingRequest":"/Users/zhengwen/aria2gu/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhengwen/aria2gu/src/views/taskDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhengwen/aria2gu/src/views/taskDetail.vue","mtime":1638083562032},{"path":"/Users/zhengwen/aria2gu/node_modules/cache-loader/dist/cjs.js","mtime":1637998138681},{"path":"/Users/zhengwen/aria2gu/node_modules/babel-loader/lib/index.js","mtime":1637998138838},{"path":"/Users/zhengwen/aria2gu/node_modules/cache-loader/dist/cjs.js","mtime":1637998138681},{"path":"/Users/zhengwen/aria2gu/node_modules/vue-loader/lib/index.js","mtime":1637998138883}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCl7CiAgICByZXR1cm57CiAgICAgIHRhc2s6bnVsbCwKICAgICAgYml0ZmllbGQ6W10KICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgIGdldEZpbGVuYW1lKHRhc2spewogICAgICBpZih0YXNrLmZpbGVzPy5bMF0ucGF0aCl7CiAgICAgICAgcmV0dXJuIHRhc2suZmlsZXNbMF0ucGF0aC5zcGxpdCgnLycpLmF0KC0xKQogICAgICB9ZWxzZXsKICAgICAgICByZXR1cm4gdGFzay5maWxlcz8udXJpcz8uWzBdPy51cmkuc3BsaXQoJy8nKS5hdCgtMSkgPz8gJ+acquefpScKICAgICAgfQogICAgfSwKICB9LAogYXN5bmMgbW91bnRlZCgpewogICAgdGhpcy50YXNrID0gYXdhaXQgd2luZG93LmFyaWEyLnRlbGxTdGF0dXModGhpcy4kcm91dGUucGFyYW1zLmdpZCkKICAgIHRoaXMuYml0ZmllbGQgPSB0aGlzLnRhc2suYml0ZmllbGQuc3BsaXQoJycpLm1hcChpdD0+cGFyc2VJbnQoaXQsMTYpKS50b1N0cmluZygyKS5wYWRTdGFydCg0LCcwJykKICB9Cn0K"},{"version":3,"sources":["taskDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"taskDetail.vue","sourceRoot":"src/views","sourcesContent":["<style lang=\"less\" scoped>\n.piece{\n  width: 16px;\n  height: 16px;\n  margin: 4px;\n  background-color: grey;\n  display: inline-block;\n  &.complete{\n    background-color: green;\n  }\n}\n</style>\n\n<template>\n  <div>\n<dl v-if=\"task\">\n  <dt>任务名称</dt>\n  <dd>{{ getFilename(task) }}</dd>\n  <dt>任务大小</dt>\n  <dd></dd>\n  <dt>进度</dt>\n  <dd></dd>\n  <dt>下载地址</dt>\n  <dd></dd>\n  <dt>文件列表</dt>\n  <dd>\n    <ul>\n      <li v-for=\"file of task.files\" :title=\"file.path\" :key=\"file.path\"></li>\n    </ul>\n  </dd>\n  <dt>目标路径</dt>\n  <dd></dd>\n  <dt>区块信息</dt>\n  <dd>\n    <span v-for=\"i of Number(task.numPieces)\" :key=\"i\" class=\"piece\" :class=\"{complete: bitfield[i-1]=='1'}\"></span>\n    <!-- 完成的片为绿色，未完成的为灰色 -->\n  </dd>\n</dl>\n  </div>\n</template>\n\n<script>\nexport default {\n  data(){\n    return{\n      task:null,\n      bitfield:[]\n    }\n  },\n  methods:{\n     getFilename(task){\n      if(task.files?.[0].path){\n        return task.files[0].path.split('/').at(-1)\n      }else{\n        return task.files?.uris?.[0]?.uri.split('/').at(-1) ?? '未知'\n      }\n    },\n  },\n async mounted(){\n    this.task = await window.aria2.tellStatus(this.$route.params.gid)\n    this.bitfield = this.task.bitfield.split('').map(it=>parseInt(it,16)).toString(2).padStart(4,'0')\n  }\n}\n</script>"]}]}
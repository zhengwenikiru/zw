{"remainingRequest":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhengwen/Desktop/zw/aria2gu/src/views/taskDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhengwen/Desktop/zw/aria2gu/src/views/taskDetail.vue","mtime":1638890542978},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/cache-loader/dist/cjs.js","mtime":1637998138681},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/babel-loader/lib/index.js","mtime":1637998138838},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/cache-loader/dist/cjs.js","mtime":1637998138681},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/vue-loader/lib/index.js","mtime":1637998138883}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOid0YXNrRGV0YWlsJywKICBwcm9wczpbJ2FyaWEyJ10sCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICB0YXNrOm51bGwsCiAgICAgIGJpdGZpZWxkOltdCiAgICB9CiAgfSwKICBtZXRob2RzOnsKICAgICBnZXRGaWxlbmFtZSh0YXNrKXsKICAgICAgaWYodGFzay5maWxlcz8uWzBdLnBhdGgpewogICAgICAgIHJldHVybiB0YXNrLmZpbGVzWzBdLnBhdGguc3BsaXQoJy8nKS5hdCgtMSkKICAgICAgfWVsc2V7CiAgICAgICAgcmV0dXJuIHRhc2suZmlsZXM/LnVyaXM/LlswXT8udXJpLnNwbGl0KCcvJykuYXQoLTEpID8/ICfmnKrnn6UnCiAgICAgIH0KICAgIH0sCiAgfSwKIGFzeW5jIG1vdW50ZWQoKXsKICAgIHRoaXMudGFzayA9IGF3YWl0IHRoaXMuYXJpYTIudGVsbFN0YXR1cyh0aGlzLiRyb3V0ZS5wYXJhbXMuZ2lkKQogICAgdGhpcy5iaXRmaWVsZCA9IHRoaXMudGFzay5iaXRmaWVsZC5zcGxpdCgnJykubWFwKGl0PT5wYXJzZUludChpdCwxNikpLnRvU3RyaW5nKDIpLnBhZFN0YXJ0KDQsJzAnKQogIH0KfQo="},{"version":3,"sources":["taskDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"taskDetail.vue","sourceRoot":"src/views","sourcesContent":["<style lang=\"less\" scoped>\n.piece{\n  width: 16px;\n  height: 16px;\n  margin: 4px;\n  background-color: grey;\n  display: inline-block;\n  &.complete{\n    background-color: green;\n  }\n}\n</style>\n\n<template>\n  <div>\n<dl v-if=\"task\">\n  <dt>任务名称</dt>\n  <dd>{{ getFilename(task) }}</dd>\n  <dt>任务大小</dt>\n  <dd>{{ (task.files[0].length/1024/1024).toFixed(2) }}MB </dd>\n  <dt>下载地址</dt>\n  <dd>{{ task.files[0].uris[0].uri }}</dd>\n  <dt>目标路径</dt>\n  <dd>{{ task.files[0].path }}</dd>\n  <dt>区块信息</dt>\n  <dd>\n    <span v-for=\"i of Number(task.numPieces)\" :key=\"i\" class=\"piece\" :class=\"{complete: bitfield[i-1]=='1'}\"></span>\n    <!-- 完成的片为绿色，未完成的为灰色 -->\n  </dd>\n</dl>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name:'taskDetail',\n  props:['aria2'],\n  data(){\n    return{\n      task:null,\n      bitfield:[]\n    }\n  },\n  methods:{\n     getFilename(task){\n      if(task.files?.[0].path){\n        return task.files[0].path.split('/').at(-1)\n      }else{\n        return task.files?.uris?.[0]?.uri.split('/').at(-1) ?? '未知'\n      }\n    },\n  },\n async mounted(){\n    this.task = await this.aria2.tellStatus(this.$route.params.gid)\n    this.bitfield = this.task.bitfield.split('').map(it=>parseInt(it,16)).toString(2).padStart(4,'0')\n  }\n}\n</script>"]}]}
{"remainingRequest":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhengwen/Desktop/zw/aria2gu/src/views/Newtask.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhengwen/Desktop/zw/aria2gu/src/views/Newtask.vue","mtime":1638687305204},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/babel-loader/lib/index.js","mtime":1637998138838},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/cache-loader/dist/cjs.js","mtime":1637998138681},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/vue-loader/lib/index.js","mtime":1637998138883}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmZ1bmN0aW9uIGdldEZpbGVDb250ZW50KGZpbGUpewogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpPT57CiAgICB2YXIgZnIgPSBuZXcgRmlsZVJlYWRlcigpCiAgICAvLyDnlKjmnaXlsIZidOaWh+S7tui9rOaNogogICAgZnIub25sb2FkID0gZnVuY3Rpb24oKXsKICAgICAgdmFyIGNvbW1hUG9zID0gZnIucmVzdWx0LmluZGV4T2YoJywnKQogICAgICByZXNvbHZlKGZyLnJlc3VsdC5zbGljZShjb21tYVBvcyArIDEpKQogICAgICAvLyDmiJDlip/or7vlj5bliJnov5DooYzmraTlh73mlbDvvIzljrvmjonmlofku7bor7vlj5blkI7liY3pnaLnmoRkYXRhOlVSTCwKICAgICAvLyBvbmxvYWTmmK/mlofku7bor7vlj5blrozmiJDml7bop6blj5EKICAgIH0KICAgIGZyLm9uZXJyb3IgPSByZWplY3QgLy8g5Ye66ZSZ5LqL5Lu25Ye95pWw6LWL5Li6cmVqZWN0KOaWh+S7tuivu+WPluaXtuinpuWPkSkKICAgIGZyLnJlYWRBc0RhdGFVUkwoZmlsZSkKICB9KQp9CmV4cG9ydCBkZWZhdWx0IHsgCiAgbmFtZTonTmV3dGFza3MnLAogIHByb3BzOlsnYXJpYTInXSwKICBkYXRhKCl7CiAgICByZXR1cm57CiAgICAgIHVyaXM6JycKICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgYXN5bmMgc3RhcnRCVChlKXsKICAgICAgdmFyIGZpbGUgPSBlLnRhcmdldC5maWxlc1swXQogICAgICB2YXIgYnRGaWxlQ29udGVudD1hd2FpdCBnZXRGaWxlQ29udGVudChmaWxlKQogICAgICBhd2FpdCB0aGlzLmFyaWEyLmFkZFRvcnJlbnQoYnRGaWxlQ29udGVudCkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQogICAgfSwKICAgYXN5bmMgc3RhcnQoKXsKICAgICAgdmFyIHVyaXMgPSB0aGlzLnVyaXMuc3BsaXQoJy9uJykubWFwKGl0PT5pdC50cmltKCkpCiAgICAgIHZhciB0YXNrSWRzID0gYXdhaXQgdGhpcy5hcmlhMi5hZGRVcmkodXJpcykKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKS8vIOWbnuWIsOmmlumhtQogICAgfQogIH0KfQo="},{"version":3,"sources":["Newtask.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Newtask.vue","sourceRoot":"src/views","sourcesContent":["<style scoped>\nlabel{\n  border:1px solid;\n  border-radius: 3px;\n}\n</style>\n\n<template>\n  <div>\n    <h2>新建下载</h2>\n    <input type=\"file\" hidden id=\"bt-file-select\">\n    <label for=\"bt-file-select\">选择BT种子</label>\n    <input type=\"file\" hidden id=\"meta-file-select\">\n    <label for=\"meta-file-select\">选择Metalink种子</label>\n    <div>\n      <textarea v-model=\"uris\" cols=\"50\" rows=\"8\"></textarea>\n    </div>\n    <button @click=\"start\">确定</button>\n  </div>\n</template>\n\n<script>\nfunction getFileContent(file){\n  return new Promise((resolve,reject)=>{\n    var fr = new FileReader()\n    // 用来将bt文件转换\n    fr.onload = function(){\n      var commaPos = fr.result.indexOf(',')\n      resolve(fr.result.slice(commaPos + 1))\n      // 成功读取则运行此函数，去掉文件读取后前面的data:URL,\n     // onload是文件读取完成时触发\n    }\n    fr.onerror = reject // 出错事件函数赋为reject(文件读取时触发)\n    fr.readAsDataURL(file)\n  })\n}\nexport default { \n  name:'Newtasks',\n  props:['aria2'],\n  data(){\n    return{\n      uris:''\n    }\n  },\n  methods:{\n    async startBT(e){\n      var file = e.target.files[0]\n      var btFileContent=await getFileContent(file)\n      await this.aria2.addTorrent(btFileContent)\n      this.$router.push('/')\n    },\n   async start(){\n      var uris = this.uris.split('/n').map(it=>it.trim())\n      var taskIds = await this.aria2.addUri(uris)\n      this.$router.push('/')// 回到首页\n    }\n  }\n}\n</script>"]}]}
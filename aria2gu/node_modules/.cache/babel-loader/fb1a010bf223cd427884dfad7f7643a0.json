{"remainingRequest":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/thread-loader/dist/cjs.js!/Users/zhengwen/Desktop/zw/aria2gu/node_modules/babel-loader/lib/index.js!/Users/zhengwen/Desktop/zw/aria2gu/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/zhengwen/Desktop/zw/aria2gu/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhengwen/Desktop/zw/aria2gu/src/views/Downloading.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhengwen/Desktop/zw/aria2gu/src/views/Downloading.vue","mtime":1638687302072},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/babel.config.js","mtime":1637998144475},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/cache-loader/dist/cjs.js","mtime":1637998138681},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/thread-loader/dist/cjs.js","mtime":1637998138681},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/babel-loader/lib/index.js","mtime":1637998138838},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/cache-loader/dist/cjs.js","mtime":1637998138681},{"path":"/Users/zhengwen/Desktop/zw/aria2gu/node_modules/vue-loader/lib/index.js","mtime":1637998138883}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy96aGVuZ3dlbi9EZXNrdG9wL3p3L2FyaWEyZ3Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9Vc2Vycy96aGVuZ3dlbi9EZXNrdG9wL3p3L2FyaWEyZ3Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy96aGVuZ3dlbi9EZXNrdG9wL3p3L2FyaWEyZ3Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmF0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmF0LWFsdGVybmF0aXZlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLyBAIGlzIGFuIGFsaWFzIHRvIC9zcmMKLy9mb3JtYXR0ZXLnmoTlgLzlhrPlrprmuLLmn5PnmoTlgLwKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEb3dubG9hZGluZyIsCiAgcHJvcHM6IFsnYXJpYTInXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFza3M6IFtdLAogICAgICBzZWxlY3RlZDogW10sCiAgICAgIHNlYXJjaFRleHQ6ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZpc2libGVUYXNrczogZnVuY3Rpb24gdmlzaWJsZVRhc2tzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuc2VhcmNoVGV4dCA9PSAnJykgewogICAgICAgIHJldHVybiB0aGlzLnRhc2tzOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLnRhc2tzLmZpbHRlcihmdW5jdGlvbiAoaXQpIHsKICAgICAgICAgIGl0LmZpbGVzWzBdLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhfdGhpcy5zZWFyY2hUZXh0LnRvTG93ZXJDYXNlKCkpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgYXJpYTI6IGZ1bmN0aW9uIGFyaWEyKCkgewogICAgICB0aGlzLnRhc2tzID0gW107CiAgICB9CiAgfSwKICB1cGRhdGVkOiBmdW5jdGlvbiB1cGRhdGVkKCkgewogICAgdGhpcy51cGRhdGVMaXN0KCk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgdGhpcy51cGRhdGVMaXN0KCk7CiAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIudXBkYXRlTGlzdCgpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNTsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwoKICAgICAgICAgICAgICBpZiAoIShfY29udGV4dC50MCA9PSAnV1NfQ09OTkVDVF9FUlJPUicpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMyLmludGVydmFsSWQpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQudDA7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDVdXSk7CiAgICB9KSksIDEwMDApOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0U3BlZWQ6IGZ1bmN0aW9uIGdldFNwZWVkKHJvdykgewogICAgICByZXR1cm4gKHJvdy5jb21wbGV0ZWRMZW5ndGggLyByb3cudG90YWxMZW5ndGggKiAxMDApLnRvRml4ZWQoMikgKyAnJSc7CiAgICB9LAogICAgLy8gZ29EZXRhaWwodGFzayl7CiAgICAvLyAgIHRoaXMuJHJvdXRlci5wdXNoKCcvdGFzay8nK3Rhc2suZ2lkKQogICAgLy8gfSwKICAgIHVwZGF0ZUxpc3Q6IGZ1bmN0aW9uIHVwZGF0ZUxpc3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IFtdOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQxID0gX3RvQ29uc3VtYWJsZUFycmF5OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5hcmlhMi50ZWxsQWN0aXZlKCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQzID0gKDAsIF9jb250ZXh0Mi50MSkoX2NvbnRleHQyLnQyKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50NCA9IF90b0NvbnN1bWFibGVBcnJheTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmFyaWEyLnRlbGxXYWl0aW5nKDAsIDEwMCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDUgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50NiA9ICgwLCBfY29udGV4dDIudDQpKF9jb250ZXh0Mi50NSk7CiAgICAgICAgICAgICAgICBfdGhpczMudGFza3MgPSBfY29udGV4dDIudDAuY29uY2F0LmNhbGwoX2NvbnRleHQyLnQwLCBfY29udGV4dDIudDMsIF9jb250ZXh0Mi50Nik7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE1OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQ3ID0gX2NvbnRleHQyWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgX3RoaXMzLnRhc2tzID0gW107CiAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDIudDc7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMCwgMTVdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOWvuemAieS4reeahOS7u+WKoeaJp+ihjOaTjeS9nCzmr4/mk43kvZzkuIDmrKHmm7TmlrDkuIDmrKHku7vliqHliJfooajnirbmgIEKICAgIGV4ZWNTZWxlY3RlZDogZnVuY3Rpb24gZXhlY1NlbGVjdGVkKGFjdGlvbikgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBzZWxlY3RlZFRhc2ssIF9pdGVyYXRvciwgX3N0ZXAsIGdpZDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKGFjdGlvbiA9PSAncmVtb3ZlJykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LiRjb25maXJtKCfnoa7lrprliKDpmaTlkJfvvJ8nKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgc2VsZWN0ZWRUYXNrID0gX3RoaXM0LnRhc2tzLmZpbHRlcihmdW5jdGlvbiAodGFzaykgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LnNlbGVjdGVkLmluY2x1ZGVzKHRhc2suZ2lkKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoc2VsZWN0ZWRUYXNrKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTE7CgogICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnMoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIGlmICgoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGdpZCA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxNTsKCiAgICAgICAgICAgICAgICBpZiAoISh0YXNrLnN0YXR1cyA9PSAncGF1c2VkJyAmJiBhY3Rpb24gPT0gJ3BhdXNlJykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoImNvbnRpbnVlIiwgMjgpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgaWYgKCEodGFzay5zdGF0dXMgPT0gJ2FjdGl2ZScgJiYgYWN0aW9uID09ICd1bnBhdXNlJykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoImNvbnRpbnVlIiwgMjgpOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuYXJpYTJbYWN0aW9uXShnaWQpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAyNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MSA9IF9jb250ZXh0M1siY2F0Y2giXSgxNSk7CgogICAgICAgICAgICAgICAgX3RoaXM0LiRhbGVydChfY29udGV4dDMudDEubWVzc2FnZSk7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQzLnQxKTsKCiAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMzI7CiAgICAgICAgICAgICAgICBfY29udGV4dDMudDIgPSBfY29udGV4dDNbImNhdGNoIl0oMTEpOwoKICAgICAgICAgICAgICAgIF9pdGVyYXRvci5lKF9jb250ZXh0My50Mik7CgogICAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDM1OwoKICAgICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5maW5pc2goMzUpOwoKICAgICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgICAgX3RoaXM0LnVwZGF0ZUxpc3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1sxLCA2XSwgWzExLCAzMiwgMzUsIDM4XSwgWzE1LCAyNF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2VsZWN0QWxsOiBmdW5jdGlvbiBzZWxlY3RBbGwoKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkLmxlbmd0aCA9PSB0aGlzLnRhc2tzLmxlbmd0aCkgewogICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBbXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNlbGVjdGVkID0gdGhpcy50YXNrcy5tYXAoZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgICByZXR1cm4gaXQuZ2lkOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlU2VsZWN0ZWQ6IGZ1bmN0aW9uIHRvZ2dsZVNlbGVjdGVkKHRhc2spIHsKICAgICAgdmFyIGlkeCA9IHRoaXMuc2VsZWN0ZWQuaW5kZXhPZih0YXNrLmdpZCk7CgogICAgICBpZiAoaWR4ID09IC0xKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZC5wdXNoKHRhc2suZ2lkLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNlbGVjdGVkLnNwbGljZShpZHgsIDEpOwogICAgICB9CiAgICB9LAogICAgZ2V0RmlsZW5hbWU6IGZ1bmN0aW9uIGdldEZpbGVuYW1lKHRhc2spIHsKICAgICAgdmFyIF90YXNrJGZpbGVzOwoKICAgICAgaWYgKChfdGFzayRmaWxlcyA9IHRhc2suZmlsZXMpICE9PSBudWxsICYmIF90YXNrJGZpbGVzICE9PSB2b2lkIDAgJiYgX3Rhc2skZmlsZXNbMF0ucGF0aCkgewogICAgICAgIHJldHVybiB0YXNrLmZpbGVzWzBdLnBhdGguc3BsaXQoJy8nKS5hdCgtMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIF90YXNrJGZpbGVzJHVyaXMkMCR1ciwgX3Rhc2skZmlsZXMyLCBfdGFzayRmaWxlczIkdXJpcywgX3Rhc2skZmlsZXMyJHVyaXMkOwoKICAgICAgICByZXR1cm4gKF90YXNrJGZpbGVzJHVyaXMkMCR1ciA9IChfdGFzayRmaWxlczIgPSB0YXNrLmZpbGVzKSA9PT0gbnVsbCB8fCBfdGFzayRmaWxlczIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGFzayRmaWxlczIkdXJpcyA9IF90YXNrJGZpbGVzMi51cmlzKSA9PT0gbnVsbCB8fCBfdGFzayRmaWxlczIkdXJpcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90YXNrJGZpbGVzMiR1cmlzJCA9IF90YXNrJGZpbGVzMiR1cmlzWzBdKSA9PT0gbnVsbCB8fCBfdGFzayRmaWxlczIkdXJpcyQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YXNrJGZpbGVzMiR1cmlzJC51cmkuc3BsaXQoJy8nKS5hdCgtMSkpICE9PSBudWxsICYmIF90YXNrJGZpbGVzJHVyaXMkMCR1ciAhPT0gdm9pZCAwID8gX3Rhc2skZmlsZXMkdXJpcyQwJHVyIDogJ+acquefpSc7CiAgICAgIH0KICAgIH0sCiAgICBnZXRQZXJjZW50OiBmdW5jdGlvbiBnZXRQZXJjZW50KHRhc2spIHsKICAgICAgaWYgKHRhc2suY29tcGxldGVkTGVuZ3RoID09IDApIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGFzay5jb21wbGV0ZWRMZW5ndGggLyB0YXNrLnRvdGFsTGVuZ3RoICogMTAwOwogICAgICB9CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpOwogIH0sCiAgY29tcG9uZW50czoge30KfTs="},{"version":3,"sources":["Downloading.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA,CAAA,OAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA;AAHA,KAAA;AAKA,GATA;AAUA,EAAA,QAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,UAAA,KAAA,UAAA,IAAA,EAAA,EAAA;AACA,eAAA,KAAA,KAAA;AACA,OAFA,MAEA;AACA,eAAA,KAAA,KAAA,CAAA,MAAA,CAAA,UAAA,EAAA,EAAA;AACA,UAAA,EAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,WAAA,GAAA,QAAA,CAAA,KAAA,CAAA,UAAA,CAAA,WAAA,EAAA;AACA,SAFA,CAAA;AAGA;AACA;AATA,GAVA;AAqBA,EAAA,KAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,WAAA,KAAA,GAAA,EAAA;AACA;AAHA,GArBA;AA0BA,EAAA,OA1BA,qBA0BA;AACA,SAAA,UAAA;AACA,GA5BA;AA6BA,EAAA,OA7BA,qBA6BA;AAAA;;AACA,SAAA,UAAA;AACA,SAAA,UAAA,GAAA,WAAA,uEAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEA,MAAA,CAAA,UAAA,EAFA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA,oBAIA,eAAA,kBAJA;AAAA;AAAA;AAAA;;AAKA,cAAA,aAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AALA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAA,IAUA,IAVA,CAAA;AAWA,GA1CA;AA2CA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,GADA,EACA;AACA,aAAA,CAAA,GAAA,CAAA,eAAA,GAAA,GAAA,CAAA,WAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,IAAA,GAAA;AACA,KAHA;AAIA;AACA;AACA;AACA,IAAA,UAPA,wBAOA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAGA,MAAA,CAAA,KAAA,CAAA,UAAA,EAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAIA,MAAA,CAAA,KAAA,CAAA,WAAA,CAAA,CAAA,EAAA,GAAA,CAJA;;AAAA;AAAA;AAAA;AAEA,gBAAA,MAAA,CAAA,KAFA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAMA,gBAAA,MAAA,CAAA,KAAA,GAAA,EAAA;AANA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA,KAhBA;AAiBA;AACA,IAAA,YAlBA,wBAkBA,MAlBA,EAkBA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,MAAA,IAAA,QADA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,uBAGA,MAAA,CAAA,QAAA,CAAA,QAAA,CAHA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAQA,gBAAA,YARA,GAQA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,yBAAA,MAAA,CAAA,QAAA,CAAA,QAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA,iBAFA,CARA;AAAA,uDAWA,YAXA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAWA,gBAAA,GAXA;AAAA;;AAAA,sBAaA,IAAA,CAAA,MAAA,IAAA,QAAA,IAAA,MAAA,IAAA,OAbA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,sBAiBA,IAAA,CAAA,MAAA,IAAA,QAAA,IAAA,MAAA,IAAA,SAjBA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,uBAqBA,MAAA,CAAA,KAAA,CAAA,MAAA,EAAA,GAAA,CArBA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAuBA,gBAAA,MAAA,CAAA,MAAA,CAAA,aAAA,OAAA;;AACA,gBAAA,OAAA,CAAA,GAAA;;AAxBA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AA2BA,gBAAA,MAAA,CAAA,UAAA;;AA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4BA,KA9CA;AA+CA,IAAA,SA/CA,uBA+CA;AACA,UAAA,KAAA,QAAA,CAAA,MAAA,IAAA,KAAA,KAAA,CAAA,MAAA,EAAA;AACA,aAAA,QAAA,GAAA,EAAA;AACA,OAFA,MAEA;AACA,aAAA,QAAA,GAAA,KAAA,KAAA,CAAA,GAAA,CAAA,UAAA,EAAA;AAAA,iBAAA,EAAA,CAAA,GAAA;AAAA,SAAA,CAAA;AACA;AACA,KArDA;AAsDA,IAAA,cAtDA,0BAsDA,IAtDA,EAsDA;AACA,UAAA,GAAA,GAAA,KAAA,QAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA,CAAA;;AACA,UAAA,GAAA,IAAA,CAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,QAAA,CAAA,MAAA,CAAA,GAAA,EAAA,CAAA;AACA;AACA,KA7DA;AA8DA,IAAA,WA9DA,uBA8DA,IA9DA,EA8DA;AAAA;;AACA,yBAAA,IAAA,CAAA,KAAA,wCAAA,YAAA,CAAA,EAAA,IAAA,EAAA;AACA,eAAA,IAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,KAAA,CAAA,GAAA,EAAA,EAAA,CAAA,CAAA,CAAA,CAAA;AACA,OAFA,MAEA;AAAA;;AACA,wDAAA,IAAA,CAAA,KAAA,sEAAA,aAAA,IAAA,4EAAA,kBAAA,CAAA,CAAA,uDAAA,mBAAA,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,EAAA,CAAA,CAAA,CAAA,CAAA,yEAAA,IAAA;AACA;AACA,KApEA;AAqEA,IAAA,UArEA,sBAqEA,IArEA,EAqEA;AACA,UAAA,IAAA,CAAA,eAAA,IAAA,CAAA,EAAA;AACA,eAAA,CAAA;AACA,OAFA,MAEA;AACA,eAAA,IAAA,CAAA,eAAA,GAAA,IAAA,CAAA,WAAA,GAAA,GAAA;AACA;AACA;AA3EA,GA3CA;AAwHA,EAAA,aAxHA,2BAwHA;AACA,IAAA,aAAA,CAAA,KAAA,UAAA,CAAA;AACA,GA1HA;AA2HA,EAAA,UAAA,EAAA;AA3HA,CAAA","sourcesContent":["<style lang=\"less\" scoped>\nul{\n  list-style: none;\n}\nli{\n  /* display: flex; */\n    cursor: pointer;\n  &.selected{\n    background-color: #ddd;\n  }\n  &:hover{\n    background-color: #eee;\n  }\n}\n</style>\n\n<template>\n  <div class=\"downloading\">\n  <h2>正在下载</h2>\n  <div>\n    <button @click=\"execSelected('pause')\">暂停</button>\n    <button @click=\"execSelected('unpause')\">开始</button>\n    <button @click=\"execSelected('remove')\">删除</button>\n    <button @click=\"selectAll\">全选</button>\n    搜索：<input type=\"text\" v-model=\"searchText\">\n    </div>\n  <ul>\n    <li v-for=\"task of visibleTasks\" :key = \"task.gid\" :class=\"{selected:selected.includes(task.gid)}\" @click=\"toggleSelected(task)\">\n      <input type=\"checkbox\" :checked=\"selected.includes(task.gid)\">\n      <span>{{ getFilename(task) }}</span>\n      |\n      <span>{{ getPercent(task) |fixed }}%</span>\n      |\n      <span>{{ task.downloadSpeed /1024 |fixed }}k/s</span>\n      |\n      <span>{{ task.status }}</span>\n      |\n      <!-- <button @click.stop=\"goDetail\">详情</button> -->\n      <router-link @click.native.stop :to=\"{name:'taskDetail',params:{gid:task.gid}}\">详情</router-link>\n      <!-- stop 使click事件不会冒泡到父元素上 -->\n    </li>\n  </ul>\n\n\n  <el-table\n    :data=\"visibleTasks\"\n    style=\"width: 100%\"\n    :default-sort = \"{prop: 'date', order: 'descending'}\"\n    >\n    <el-table-column\n      prop=\"gid\"\n      label=\"名称\"\n      sortable\n      width=\"180\">\n    </el-table-column>\n    <el-table-column\n      prop=\"completedLength\"\n      label=\"进度\"\n      sortable\n      width=\"180\">\n    </el-table-column>\n     <el-table-column\n      :formater=\"getSpeed\"      \n       label=\"速度\"\n      sortable\n      width=\"180\">\n    </el-table-column>\n       <el-table-column\n      prop=\"status\"\n      label=\"状态\"\n      sortable\n      width=\"180\">\n    </el-table-column>\n  </el-table>\n  </div>\n</template>\n<script>\n// @ is an alias to /src\n//formatter的值决定渲染的值\n\nexport default {\n  name: \"Downloading\",\n  props:['aria2'],\n  data(){\n    return{\n      tasks:[],\n      selected:[],\n      searchText:'',\n    }\n  },\n  computed:{\n    visibleTasks(){\n      if(this.searchText == ''){\n        return this.tasks\n      }else{\n        return this.tasks.filter(it => {\n          it.files[0].path.toLowerCase().includes(this.searchText.toLowerCase())\n        })\n      }\n    }\n  },\n  watch:{\n    aria2(){\n      this.tasks=[]\n    }\n  },\n  updated(){\n    this.updateList()\n  },\n  mounted(){\n    this.updateList()\n    this.intervalId = setInterval(async()=>{\n      try{\n       await this.updateList()\n      }catch(e){\n        if(e == 'WS_CONNECT_ERROR'){\n          clearInterval(this.intervalId)\n        }else{\n          throw e\n        }\n      }\n    },1000)\n  },\n  methods:{\n    getSpeed(row){\n      return (row.completedLength / row.totalLength * 100).toFixed(2) + '%'\n    },\n    // goDetail(task){\n    //   this.$router.push('/task/'+task.gid)\n    // },\n   async updateList(){\n     try{\n       this.tasks = [\n        ...await this.aria2.tellActive(),\n        ...await this.aria2.tellWaiting(0,100)]\n     }catch(e){\n       this.tasks=[]\n       throw e\n     }\n    },\n    // 对选中的任务执行操作,每操作一次更新一次任务列表状态\n   async execSelected(action){\n     if(action == 'remove'){\n       try{\n         await this.$confirm('确定删除吗？')\n       }catch(e){\n          return\n       }\n     }\n     var selectedTask = this.tasks.filter(task=>{\n      return this.selected.includes(task.gid)\n     })\n      for(let gid of selectedTask){\n        try{\n          if(task.status=='paused'&& action=='pause')\n          {\n            continue\n          }\n          if(task.status == 'active' && action =='unpause')\n          {\n            continue\n          }\n          await this.aria2[action](gid)\n        }catch(e){\n          this.$alert(e.message)\n          console.log(e)\n        }\n      }\n      this.updateList()\n    },\n    selectAll(){\n      if(this.selected.length == this.tasks.length){\n        this.selected=[]\n      }else{\n        this.selected = this.tasks.map(it =>it.gid)\n      }\n    },\n    toggleSelected(task){\n      var idx = this.selected.indexOf(task.gid)\n      if(idx ==-1){\n        this.selected.push(task.gid,true)\n      }else{\n        this.selected.splice(idx,1)\n      }\n    },\n    getFilename(task){\n      if(task.files?.[0].path){\n        return task.files[0].path.split('/').at(-1)\n      }else{\n        return task.files?.uris?.[0]?.uri.split('/').at(-1) ?? '未知'\n      }\n    },\n     getPercent(task) {\n      if (task.completedLength == 0) {\n        return 0\n      } else {\n        return task.completedLength / task.totalLength * 100\n      }\n    },\n     },\n  beforeDestroy(){\n    clearInterval(this.intervalId)\n  },\n  components: {\n  },\n};\n</script>\n"],"sourceRoot":"src/views"}]}